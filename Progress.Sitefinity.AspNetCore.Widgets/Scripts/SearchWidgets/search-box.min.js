!function(){var e,t="data-sf-active",a="data-sfitem",r=document.querySelector("[data-sf-active-class]"),n=r.dataset&&((e=r.dataset.sfActiveClass)&&""!==e)?r.dataset.sfActiveClass:null,s=n?c(n):null,i=document.querySelector("[data-sf-visibility-hidden]"),o=i.dataset?i.dataset.sfVisibilityHidden:null,l=document.querySelector("[data-sf-search-autocomplete-item-class]"),u=l.dataset?l.dataset.sfSearchAutocompleteItemClass:null,d=u?c(u):null;function c(e){return e.split(" ")}function f(e){if(e&&"widgetLoaded"===e.type){var t=e.detail.element.querySelector("[data-sf-role='search-box']"),a=e.detail.element.querySelector("[data-sf-role='search-button'");t&&g(t,a)}else document.querySelectorAll("[data-sf-role='search-box']").forEach((function(e){if(e){var t=e.parentNode.querySelector("[data-sf-role='search-button'");g(e,t)}}))}function g(e,r){!function(e,t){e&&(e.addEventListener("keypress",(function(e){!function(e){e||(e=window.event);13==(e.keyCode||e.charCode)&&l(e.target)}(e)})),e.addEventListener("keyup",(function(e){!function(e){if(38!=e.keyCode&&40!=e.keyCode&&27!=e.keyCode){var t=e.target.value.trim(),a=i(e.target);a.minSuggestionLength&&t.length>=a.minSuggestionLength?function(e){var t=i(e),a=t.servicePath+"/Default.GetSuggestions()?indexName="+t.catalogue+"&sf_culture="+t.culture+"&siteId="+t.siteId+"&scoringInfo="+t.scoringSetting+"&suggestionFields="+t.suggestionFields+"&searchQuery="+e.value;1==t.resultsForAllSites?a+="&resultsForAllSites=True":2==t.resultsForAllSites&&(a+="&resultsForAllSites=False");fetch(a).then((function(e){e.json().then((function(e){n.source(e.value)}))})).catch((function(){n.hide()}))}(e.target):n&&n.hide()}40==e.keyCode?n.focus():27==e.keyCode&&n.hide()}(e)})));t&&t.addEventListener("click",(function(t){l(e)}))}(e,r);var n=function(e){var r=e.parentNode.parentNode.querySelector("[data-sf-role='search-box-autocomplete']"),n=[];function i(){if(r)for(var e=r.lastElementChild;e;)r.removeChild(e),e=r.lastElementChild}function u(t){var a=t.keyCode,n=r.querySelector("[data-sfitem][data-sf-active]");if(n){var s=n.parentElement.previousElementSibling,i=n.parentElement.nextElementSibling;38==a&&s?m(s):40==a&&i?m(i):13==a?(e.value=currentNode.innerText,l(e),v(),e.focus()):27==a&&(c(),v(!1),e.focus())}}function c(){var e=r.querySelector("[data-sf-active]");e&&s&&(e.classList.remove(...s),e.removeAttribute(t))}function f(t){var a=t.target.innerText;e.value=a,l(e),v()}function g(){!function(){const t=e.clientWidth;r&&(r.style.width=t+"px")}(),o?r.classList.remove(o):r.style.display=""}function v(e){void 0===e&&(e=!0),e&&i(),r&&(r.style.width=""),r&&(o?r.classList.add(o):r.style.display="none")}function h(e){r.contains(e.relatedTarget)||v(!1)}function m(e){c();var a=e.querySelector("[data-sfitem]");a&&s&&a.classList.add(...s),a.setAttribute(t,""),a.focus()}return e.addEventListener("keyup",(function(e){40==e.keyCode&&n.length&&(g(),m(n[0]))})),e.addEventListener("focusout",h),r?.addEventListener("focusout",h),r?.addEventListener("keyup",u),r?.addEventListener("click",f),{source:function(e){e=Array.isArray(e)?e:[],n=function(e){var t=[];if(Array.isArray(e)&&e.length>0)for(var r=0;r<e.length;r++){var n=document.createElement("LI");n.setAttribute("role","option");var s=document.createElement("BUTTON");s.setAttribute("role","presentation"),d&&s.classList.add(...d),s.setAttribute(a,""),s.innerText=e[r],s.title=e[r],s.tabIndex=-1,n.appendChild(s),t.push(n)}return t}(e),i();for(var t=0;t<n.length;t++)r.appendChild(n[t]);n.length&&g()},show:g,hide:v,clear:i,focus:function(){r.children.length&&r.children[0].querySelector("[data-sfitem]").focus()}}}(e);function i(e){return{resultsUrl:e.getAttribute("data-sf-results-url"),catalogue:e.getAttribute("data-sf-search-catalogue"),scoringSetting:e.getAttribute("data-sf-scoring-setting"),minSuggestionLength:parseInt(e.getAttribute("data-sf-suggestions-length")),siteId:e.getAttribute("data-sf-site-id"),culture:e.getAttribute("data-sf-culture"),suggestionFields:e.getAttribute("data-sf-suggestions-fields"),servicePath:e.getAttribute("data-sf-service-path"),orderBy:e.getAttribute("data-sf-sort"),resultsForAllSites:e.getAttribute("data-sf-results-all")}}function l(e){window.DataIntelligenceSubmitScript&&DataIntelligenceSubmitScript._client.sentenceClient.writeSentence({predicate:"Search for",object:e.value.trim(),objectMetadata:[{K:"PageUrl",V:location.href}]});var t=function(e){var t=e.value.trim(),a=e.getAttribute("data-sf-results-url"),r=(-1===a.indexOf("?")?"?":"&")+"indexCatalogue="+e.getAttribute("data-sf-search-catalogue"),n="&searchQuery="+encodeURIComponent(t),s="&wordsMode=AllWords",i="&sf_culture="+e.getAttribute("data-sf-culture"),o=a+r+n+s+i,l=e.getAttribute("data-sf-scoring-setting");l&&(o=o+"&scoringInfo="+l);var u=e.getAttribute("data-sf-sort");u&&(o=o+"&orderBy="+u);var d=e.getAttribute("data-sf-results-all");1==d?o+="&resultsForAllSites=True":2==d&&(o+="&resultsForAllSites=False");return o}(e);window.location=t}}document.addEventListener("widgetLoaded",f),document.addEventListener("DOMContentLoaded",f)}();