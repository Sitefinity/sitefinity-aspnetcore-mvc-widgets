!function(){function e(e){if(e&&"widgetLoaded"===e.type){var n=e.detail.element.querySelector("[data-sf-role='search-box']"),r=e.detail.element.querySelector("[data-sf-role='search-button'");n&&t(n,r)}else document.querySelectorAll("[data-sf-role='search-box']").forEach((function(e){if(e){var n=e.parentNode.querySelector("[data-sf-role='search-button'");t(e,n)}}))}function t(e,t){!function(e,t){e&&(e.addEventListener("keypress",(function(e){!function(e){e||(e=window.event);13==(e.keyCode||e.charCode)&&i(e.target)}(e)})),e.addEventListener("keyup",(function(e){!function(e){if(38!=e.keyCode&&40!=e.keyCode&&27!=e.keyCode){var t=e.target.value.trim(),i=r(e.target);i.minSuggestionLength&&t.length>=i.minSuggestionLength?function(e){var t=r(e),i=t.servicePath+"/Default.GetSuggestions()?indexName="+t.catalogue+"&sf_culture="+t.culture+"&siteId="+t.siteId+"&scoringInfo="+t.scoringSetting+"&suggestionFields="+t.suggestionFields+"&searchQuery="+e.value;fetch(i).then((function(e){e.json().then((function(e){n.source(e.value)}))})).catch((function(){n.hide()}))}(e.target):n.hide()}40==e.keyCode?n.focus():27==e.keyCode&&n.hide()}(e)})));t&&t.addEventListener("click",(function(t){i(e)}))}(e,t);var n=function(e){var t=e.parentNode.parentNode.querySelector("[data-sf-role='search-box-autocomplete']"),n=[];function r(){if(t)for(var e=t.lastElementChild;e;)t.removeChild(e),e=t.lastElementChild}function a(n){var r=n.keyCode,a=t.querySelector(".dropdown-item.active");if(a){var s=a.parentElement.previousElementSibling,u=a.parentElement.nextElementSibling;38==r&&s?l(s):40==r&&u?l(u):13==r?(e.value=currentNode.innerText,i(e),c(),e.focus()):27==r&&(o(),c(!1),e.focus())}}function o(){var e=t.querySelector(".dropdown-item.active");e&&e.classList.remove("active")}function s(t){var n=t.target.innerText;e.value=n,i(e),c()}function u(){!function(){const n=e.clientWidth;t.style.width=n+"px"}(),t.classList.remove("d-none")}function c(e){void 0===e&&(e=!0),e&&r(),t.style.width="",t.classList.add("d-none")}function d(e){t.contains(e.relatedTarget)||c(!1)}function l(e){o();var t=e.querySelector(".dropdown-item");t.classList.add("active"),t.focus()}return e.addEventListener("keyup",(function(e){40==e.keyCode&&n.length&&(u(),l(n[0]))})),e.addEventListener("focusout",d),t?.addEventListener("focusout",d),t?.addEventListener("keyup",a),t?.addEventListener("click",s),{source:function(e){e=Array.isArray(e)?e:[],n=function(e){var t=[];if(Array.isArray(e)&&e.length>0)for(var n=0;n<e.length;n++){var r=document.createElement("LI");r.setAttribute("role","option");var i=document.createElement("BUTTON");i.setAttribute("role","presentation"),i.classList.add("dropdown-item","text-truncate"),i.innerText=e[n],i.title=e[n],i.tabIndex=-1,r.appendChild(i),t.push(r)}return t}(e),r();for(var i=0;i<n.length;i++)t.appendChild(n[i]);n.length&&u()},show:u,hide:c,clear:r,focus:function(){t.children.length&&t.children[0].querySelector(".dropdown-item").focus()}}}(e);function r(e){return{resultsUrl:e.getAttribute("data-sf-results-url"),catalogue:e.getAttribute("data-sf-search-catalogue"),scoringSetting:e.getAttribute("data-sf-scoring-setting"),minSuggestionLength:parseInt(e.getAttribute("data-sf-suggestions-length")),siteId:e.getAttribute("data-sf-site-id"),culture:e.getAttribute("data-sf-culture"),suggestionFields:e.getAttribute("data-sf-suggestions-fields"),servicePath:e.getAttribute("data-sf-service-path"),orderBy:e.getAttribute("data-sf-sort")}}function i(e){window.DataIntelligenceSubmitScript&&DataIntelligenceSubmitScript._client.sentenceClient.writeSentence({predicate:"Search for",object:e.value.trim(),objectMetadata:[{K:"PageUrl",V:location.href}]});var t=function(e){var t=e.value.trim(),n=e.getAttribute("data-sf-results-url"),r=(-1===n.indexOf("?")?"?":"&")+"indexCatalogue="+e.getAttribute("data-sf-search-catalogue"),i="&searchQuery="+t,a="&wordsMode=AllWords",o="&sf_culture="+e.getAttribute("data-sf-culture"),s=n+r+i+a+o,u=e.getAttribute("data-sf-scoring-setting");u&&(s=s+"&scoringInfo="+u);var c=e.getAttribute("data-sf-sort");c&&(s=s+"&orderBy="+c);return s}(e);window.location=t}}document.addEventListener("widgetLoaded",e),document.addEventListener("DOMContentLoaded",e)}();