!function(){var e,t="data-sf-active",n="data-sfitem",r=document.querySelector("[data-sf-active-class]"),a=r.dataset&&((e=r.dataset.sfActiveClass)&&""!==e)?r.dataset.sfActiveClass:null,s=a?c(a):null,i=document.querySelector("[data-sf-visibility-hidden]"),l=i.dataset?i.dataset.sfVisibilityHidden:null,o=document.querySelector("[data-sf-search-autocomplete-item-class]"),u=o.dataset?o.dataset.sfSearchAutocompleteItemClass:null,d=u?c(u):null;function c(e){return e.split(" ")}function f(e){if(e&&"widgetLoaded"===e.type){var t=e.detail.element.querySelector("[data-sf-role='search-box']"),n=e.detail.element.querySelector("[data-sf-role='search-button'");t&&g(t,n)}else document.querySelectorAll("[data-sf-role='search-box']").forEach((function(e){if(e){var t=e.parentNode.querySelector("[data-sf-role='search-button'");g(e,t)}}))}function g(e,r){!function(e,t){e&&(e.addEventListener("keypress",(function(e){!function(e){e||(e=window.event);13==(e.keyCode||e.charCode)&&o(e.target)}(e)})),e.addEventListener("keyup",(function(e){!function(e){if(38!=e.keyCode&&40!=e.keyCode&&27!=e.keyCode){var t=e.target.value.trim(),n=i(e.target);n.minSuggestionLength&&t.length>=n.minSuggestionLength?function(e){var t=i(e),n=t.servicePath+"/Default.GetSuggestions()?indexName="+t.catalogue+"&sf_culture="+t.culture+"&siteId="+t.siteId+"&scoringInfo="+t.scoringSetting+"&suggestionFields="+t.suggestionFields+"&searchQuery="+e.value;1==t.resultsForAllSites?n+="&resultsForAllSites=True":2==t.resultsForAllSites&&(n+="&resultsForAllSites=False");fetch(n).then((function(e){e.json().then((function(e){a.source(e.value)}))})).catch((function(){a.hide()}))}(e.target):a&&a.hide()}40==e.keyCode?a.focus():27==e.keyCode&&a.hide()}(e)})));t&&t.addEventListener("click",(function(t){o(e)}))}(e,r);var a=function(e){var r=e.parentNode.parentNode.querySelector("[data-sf-role='search-box-autocomplete']"),a=[];function i(){if(r)for(var e=r.lastElementChild;e;)r.removeChild(e),e=r.lastElementChild}function u(a){var s=a.keyCode,i=`[${n}][${t}]`,l=r.querySelector(i);if(l){var u=l.parentElement.previousElementSibling,d=l.parentElement.nextElementSibling;38==s&&u?y(u):40==s&&d?y(d):13==s?(e.value=currentNode.innerText,o(e),v(),e.focus()):27==s&&(c(),v(!1),e.focus())}}function c(){var e=r.querySelector(`[${t}]`);e&&s&&(e.classList.remove(...s),e.removeAttribute(t))}function f(t){var n=t.target.innerText;e.value=n,o(e),v()}function g(){!function(){const t=e.clientWidth;r&&(r.style.width=t+"px")}(),r&&(l?r.classList.remove(l):r.style.display="")}function v(e){void 0===e&&(e=!0),e&&i(),null!=r&&(r.style.width=""),r&&(l?r?.classList.add(l):null!=r&&(r.style.display="none"))}function h(e){null==r||r.contains(e.relatedTarget)||v(!1)}function y(e){c();var r=e.querySelector(`[${n}]`);r&&s&&r.classList.add(...s),r.setAttribute(t,""),r.focus()}return e.addEventListener("keyup",(function(e){40==e.keyCode&&a.length&&(g(),y(a[0]))})),e.addEventListener("focusout",h),r?.addEventListener("focusout",h),r?.addEventListener("keyup",u),r?.addEventListener("click",f),{source:function(e){e=Array.isArray(e)?e:[],a=function(e){var t=[];if(Array.isArray(e)&&e.length>0)for(var r=0;r<e.length;r++){var a=document.createElement("LI");a.setAttribute("role","option");var s=document.createElement("BUTTON");s.setAttribute("role","presentation"),d&&s.classList.add(...d),s.setAttribute(n,""),s.innerText=e[r],s.title=e[r],s.tabIndex=-1,a.appendChild(s),t.push(a)}return t}(e),i();for(var t=0;t<a.length;t++)r&&r.appendChild(a[t]);a.length&&g()},show:g,hide:v,clear:i,focus:function(){r&&r.children.length&&r.children[0].querySelector(`[${n}]`).focus()}}}(e);function i(e){return{resultsUrl:e.getAttribute("data-sf-results-url"),catalogue:e.getAttribute("data-sf-search-catalogue"),scoringSetting:e.getAttribute("data-sf-scoring-setting"),minSuggestionLength:parseInt(e.getAttribute("data-sf-suggestions-length")),siteId:e.getAttribute("data-sf-site-id"),culture:e.getAttribute("data-sf-culture"),suggestionFields:e.getAttribute("data-sf-suggestions-fields"),servicePath:e.getAttribute("data-sf-service-path"),orderBy:e.getAttribute("data-sf-sort"),resultsForAllSites:e.getAttribute("data-sf-results-all")}}function o(e){window.DataIntelligenceSubmitScript&&DataIntelligenceSubmitScript._client.fetchClient.sendInteraction({P:"Search for",O:e.value.trim(),OM:{PageUrl:location.href}});var t=function(e){var t=e.value.trim(),n=e.getAttribute("data-sf-results-url"),r=(-1===n.indexOf("?")?"?":"&")+"indexCatalogue="+e.getAttribute("data-sf-search-catalogue"),a="&searchQuery="+encodeURIComponent(t),s="&wordsMode=AllWords",i="&sf_culture="+e.getAttribute("data-sf-culture"),l=n+r+a+s+i,o=e.getAttribute("data-sf-scoring-setting");o&&(l=l+"&scoringInfo="+o);var u=e.getAttribute("data-sf-sort");u&&(l=l+"&orderBy="+u);var d=e.getAttribute("data-sf-results-all");1==d?l+="&resultsForAllSites=True":2==d&&(l+="&resultsForAllSites=False");return l}(e);window.location=t}}document.addEventListener("widgetLoaded",f),document.addEventListener("DOMContentLoaded",f)}();