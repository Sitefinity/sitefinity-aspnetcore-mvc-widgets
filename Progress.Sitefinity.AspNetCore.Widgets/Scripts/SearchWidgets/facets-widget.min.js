!function () { function e() { var e = "filter", t = "__sf-range__", a = "DateAndTime", n = document.getElementById("facetContainer"), r = document.getElementById("applied-filters"), o = 10; if (n) { n.addEventListener("change", (function (e) { e && e.target && e.target.attributes["data-custom-range"] || (v(e.target), l(b(n, e.target))) })); var u = document.getElementById("sf-facet-clear-all-btn"); u && u.addEventListener("click", (function () { n.querySelectorAll('input[type="checkbox"]:checked').forEach((function (e) { e.checked = !1 })); var e = n.querySelectorAll("input[data-custom-range]"); e && e.forEach((function (e) { e.value = "" })), r.innerText = "", l(b(n, null)) })); var c = document.querySelectorAll('[id^="show-more-less"]'), i = document.querySelectorAll('[id^="custom-range"]'); (c || i) && n.addEventListener("click", (function (e) { if (e.target && e.target.id.startsWith("show-more-less")) { var n = e.target.attributes["data-facet-type"].value, r = e.target.attributes["show-less"].value, u = e.target.attributes["show-more"].value, c = "facets-group-list-" + n; !function (e, t, a, n) { var r = e.filter((e => e.classList.contains("d-none"))); r.length > 0 ? (r.forEach((e => { e.classList.remove("d-none"), e.classList.add("d-flex") })), t.target.innerText = a) : (e.forEach(((e, t) => { t > o - 1 && (e.classList.remove("d-flex"), e.classList.add("d-none")) })), t.target.innerText = n) }(Array.from(document.querySelectorAll("#" + c + ">li")), e, r, u) } var i = e.target.id.startsWith("custom-range-btn") ? e.target : e.target.closest('[id^="custom-range-btn"]'); i && function (e) { var n = e.attributes["data-custom-range-name"], r = e.attributes["data-custom-range-type"]; if (n && r) { var o = n.value, u = r.value; if (o && u) { var c = document.getElementById("from-" + o), i = document.getElementById("to-" + o); if (c && i) { !function (e) { var t = document.getElementById("facets-group-list-" + e); if (t) { t.querySelectorAll('input[type="checkbox"]:checked').forEach((function (e) { e.checked = !1, v(e) })) } }(o); var m = c.value, g = i.value; if (null != m && "" !== m && null != g && "" !== g) { var h = function (e, n, r) { if (e === a) { var o = new Date(n); o.setHours(0); var u = new Date(r); return u.setHours(0), o.toISOString() + t + u.toISOString() } return n + t + r }(u, m, g), p = s(u, m, g), y = "facet-checkbox-" + o + "-" + h, b = !0, k = document.getElementById(y); k ? (b = !1, k.checked = !0) : h = encodeURIComponent(h), f(o, h, p, b); var A = w(); d(A), l(E(A, o, !1)) } } } } }(i) })) } function l(t) { var a = JSON.stringify(t), n = window.location.search, r = new Querystring(n.substring(1, n.length)); if (t && t.appliedFilters && t.appliedFilters.length > 0) { var o = btoa(a); r.set(e, o), m(!0) } else r.remove(e), m(!1); var u = function (e) { var t = window.location.href.split("?")[0]; e.remove("page"); var a = t + "?" + e.toString(); return a }(r); !function (e) { var t = new XMLHttpRequest; t.open("GET", e, !0), t.setRequestHeader("Content-type", "application/json; charset=utf-8"), t.setRequestHeader("Accept", "application/json"), document.dispatchEvent(new CustomEvent("beginLoadingSearchResults")), t.onreadystatechange = function () { if (4 === t.readyState && 200 === t.status && t.responseText) { var e = (new DOMParser).parseFromString(t.responseText, "text/html"); e && (document.dispatchEvent(new CustomEvent("searchResultsLoaded", { detail: { searchResultsPageDocument: e } })), function (e) { var t = e.getElementById("facetContent"); document.getElementById("facetContent").innerHTML = t.innerHTML, p(), k() }(e)) } }, t.onerror = function () { document.dispatchEvent(new CustomEvent("searchResultsLoaded", { detail: { searchResultsPageDocument: null } })) }, t.send(null) }(u), window.history.pushState({ path: u }, "", u) } function s(e, t, n) { if (e === a) { var r = new Date(t), o = { month: "short", day: "numeric" }, u = r.toLocaleString(void 0, o) + " " + r.getFullYear(), c = new Date(n); return u + " - " + (c.toLocaleString(void 0, o) + " " + c.getFullYear()) } return t + " - " + n } function d(e) { document.querySelectorAll("[data-selected-custom-range]").forEach((function (t) { var a = t.attributes["data-facet-value"], n = t.attributes["data-facet-key"]; if (a && n) { var r = a.value, o = n.value, u = { filterValue: r, isCustom: !0 }; e.hasOwnProperty(o) ? e[o].push(u) : e[o] = [u] } })) } function f(e, t, a, n) { var o, u, c = g(e, t); if (!(null !== document.getElementById(c))) { o = e, (u = r.querySelectorAll('[data-selected-custom-range][data-facet-key="' + o + '"]')) && u.forEach((function (e) { r.removeChild(e.parentElement) })); var i = h(c, e, t, a, n); r.appendChild(i) } } function m(e) { var t = document.getElementById("sf-facet-clear-all-btn"); t && (e ? t.removeAttribute("hidden") : t.setAttribute("hidden", "true")) } function v(e) { if (e && "input" === e.tagName.toLowerCase() && !e.attributes["data-custom-range"]) { var t = e.attributes["data-facet-key"].value, a = e.attributes["data-facet-value"].value, n = e.parentElement.getElementsByTagName("label")[0].textContent, o = g(t, a), u = document.getElementById(o); if (e.checked) { var c = h(o, t, a, n, !1); r.appendChild(c), function (e) { var t = "[data-facet-key='" + e + "']", a = t + "[data-selected-custom-range]", n = document.querySelector(a); n && r.removeChild(n.parentElement) }(t) } else r.removeChild(u.parentElement) } } function g(e, t) { return "remove-facet-filter-" + e + "-" + t } function h(e, t, a, n, o) { var u = r.attributes["data-sf-filter-label-css-class"].value, c = r.attributes["data-sf-applied-filter-html-tag"].value || "span", i = document.createElement(c); i.setAttribute("class", u), i.innerText = n; var l = r.attributes["data-sf-remove-filter-css-class"].value, s = document.createElement("span"); return s.setAttribute("id", e), s.setAttribute("role", "button"), s.setAttribute("tabindex", "0"), s.setAttribute("title", "Remove"), s.setAttribute("class", l), s.setAttribute("data-facet-key", t), s.setAttribute("data-facet-value", a), o && s.setAttribute("data-selected-custom-range", !0), s.innerText = "✕", i.appendChild(s), i } function p(n) { var r = window.location.search, o = new Querystring(r.substring(1, r.length)).get(e); if (o) { m(!0); var u = atob(o); JSON.parse(u).appliedFilters.forEach((function (e) { e.filterValues.forEach((function (r) { var o = decodeURIComponent(e.fieldName), u = decodeURIComponent(r.filterValue), c = "facet-checkbox-" + o + "-" + u, i = document.getElementById(c); if (i || (c = c.replace(/\./g, ","), i = document.getElementById(c)), i) i.checked = !0, n && v(i); else { var l = "facets-group-list-" + o, d = document.getElementById(l); if (d) { var m = d.attributes["data-facet-type"]; if (m) { var g = m.value; g && function (e, n, r) { var o = document.getElementById("from-" + e), u = document.getElementById("to-" + e); if (o && u) { var c = n.split(t); if (c && c.length > 0) { var i = c[0], l = c[1]; if (null != i && null != l) r === a && (i = y(i), l = y(l)), o.value = i, u.value = l, f(e, n, s(r, i, l), !0) } } }(o, u, g) } } } })) })) } } function y(e) { var t = new Date(e), a = t.getMonth() + 1; 2 !== (a = a.toString()).length && (a = "0" + a); var n = t.getDate().toString(); return 2 !== n.length && (n = "0" + n), t.getFullYear() + "-" + a + "-" + n } function b(e, t) { if (e) { var a, n = w(); t && "input" === t.tagName.toLowerCase() && (a = t.attributes["data-facet-key"].value); var r = !1; return t && "input" === t.tagName.toLowerCase() && (a = t.attributes["data-facet-key"].value, r = !t.checked), d(n), E(n, a, r) } } function E(e, t, a) { return { appliedFilters: Object.keys(e).map((function (t) { return { fieldName: t, filterValues: e[t] } })), lastSelectedFilterGropName: t, isDeselected: a } } function k() { if (n) { var e = function (e) { var t = Object.keys(e).map((function (t) { return { fieldName: t, filterValues: e[t] } })); return t }(w()); e.forEach((function (e) { var t = e.fieldName, a = document.getElementById("show-more-less-" + t); if (a) { var n = a.attributes["show-less"].value, r = e.filterValues, u = "facets-group-list-" + t, c = Array.from(document.querySelectorAll("#" + u + ">li")), i = []; c.forEach((function (e) { var t = e.getElementsByTagName("input")[0].attributes["data-facet-value"].value, a = encodeURIComponent(t); i.push(a) })); for (var l = 0; l < r.length; l++) { if (i.indexOf(r[l]) > o - 1) { c.forEach((function (e) { e.removeAttribute("hidden"), a.innerText = n })); break } } } })) } } function w() { var e = {}, t = n.querySelectorAll('input[type="checkbox"]:checked'); return t && t.forEach((function (t) { var a = t.attributes["data-facet-key"].value, n = t.attributes["data-facet-value"].value, r = encodeURIComponent(a), o = { filterValue: encodeURIComponent(n), isCustom: !1 }; e.hasOwnProperty(r) ? e[r].push(o) : e[r] = [o] })), e } r && r.addEventListener("click", (function (e) { if (e.target && e.target.hasAttribute("data-facet-key")) { var t = e.target.parentElement; r.removeChild(t); var a = e.target.attributes["data-facet-key"].value, o = e.target.attributes["data-facet-value"].value; if (e.target.hasAttribute("data-selected-custom-range")) { var u = "facets-group-list-" + a, c = document.querySelectorAll("#" + u + " input"); c && c.forEach((function (e) { e.value = "" })) } else { var i = "facet-checkbox-" + a + "-" + o, l = document.getElementById(i); l && (l.checked = !1) } n.dispatchEvent(new Event("change")) } })), p(!0), k() } document.addEventListener("DOMContentLoaded", (function () { e() })) }();